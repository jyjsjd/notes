---
title: 内存屏障
created: '2019-02-28T02:40:00.195Z'
modified: '2019-02-28T02:43:13.755Z'
tags: [Java]
---

# 内存屏障
`volatile` 关键字：
* 保证可见性、不保证原子性；
* 禁止指令重排序。

加入 `volatile` 关键字时，汇编代码会多出一个 `lock` 前缀指令。`lock` 前缀指令其实就相当于一个内存屏障。内存屏障是一组处理指令，用来实现对内存操作的顺序限制。`volatile` 的底层就是通过内存屏障来实现的。`volatile` 变量在写操作之后会插入一个 `store 屏障`，在读操作之前会插入一个 `load 屏障`。
